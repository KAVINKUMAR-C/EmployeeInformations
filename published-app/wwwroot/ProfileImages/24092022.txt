<div class="row mt-3">

        <div class="col-12 mt-3">
            <h2 class="inner-heading">Top Membership By Country</h2>
            <div class="card chart-block p-4">

                <div id="topmembership"></div>
            </div>
        </div>
    </div>




 // top membership

    $.ajax({
        type: "Get",
        url: "/Home/GetTopMembership",
        datatype: "json",
        traditional: true,
        beforeSend: function() {
            $('.loader').css('display', 'block');
        },
        success: function(data) {

            var root = am5.Root.new("topmembership");

            // Set themes
            // https://www.amcharts.com/docs/v5/concepts/themes/
            root.setThemes([
                am5themes_Animated.new(root)
            ]);


            // Create chart
            // https://www.amcharts.com/docs/v5/charts/xy-chart/
            var chart = root.container.children.push(am5xy.XYChart.new(root, {
                panX: false,
                panY: false,
                wheelX: "panX",
                wheelY: "zoomX",
                layout: root.verticalLayout
            }));


            // Add legend
            // https://www.amcharts.com/docs/v5/charts/xy-chart/legend-xy-series/
            var legend = chart.children.push(
                am5.Legend.new(root, {
                    centerX: am5.p50,
                    x: am5.p50
                })
            );

            var barChartDataList = SplitDataByItem2(data.barChart);

            var data = barChartDataList;


            // Create axes
            // https://www.amcharts.com/docs/v5/charts/xy-chart/axes/
            var xAxis = chart.xAxes.push(am5xy.CategoryAxis.new(root, {
                categoryField: "countryName",
                renderer: am5xy.AxisRendererX.new(root, {
                    cellStartLocation: 0.1,
                    cellEndLocation: 0.9
                }),
                tooltip: am5.Tooltip.new(root, {})
            }));

            xAxis.data.setAll(data);

            var yAxis = chart.yAxes.push(am5xy.ValueAxis.new(root, {
                renderer: am5xy.AxisRendererY.new(root, {})
            }));


            // Add series
            // https://www.amcharts.com/docs/v5/charts/xy-chart/series/
            function makeSeries(name, fieldName) {
                var series = chart.series.push(am5xy.ColumnSeries.new(root, {
                    name: name,
                    xAxis: xAxis,
                    yAxis: yAxis,
                    valueYField: fieldName,
                    categoryXField: "countryName"
                }));

                series.columns.template.setAll({
                    tooltipText: "{name}, {categoryX}:{valueY}",
                    width: am5.percent(90),
                    tooltipY: 0
                });

                series.data.setAll(data);

                // Make stuff animate on load
                // https://www.amcharts.com/docs/v5/concepts/animations/
                series.appear();

                series.bullets.push(function() {
                    return am5.Bullet.new(root, {
                        locationY: 0,
                        sprite: am5.Label.new(root, {
                            text: "{valueY}",
                            fill: root.interfaceColors.get("alternativeText"),
                            centerY: 0,
                            centerX: am5.p50,
                            populateText: true
                        })
                    });
                });

                legend.data.push(series);
            }

            makeSeries("BasicTest", "BasicTestCount");
            makeSeries("Professional", "ProfessionalCount");
            makeSeries("Enterprise", "EnterpriseCount");
            makeSeries("VIP", "VIPCount");
            makeSeries("VIP Builder", "VIPBuilderCount");
            makeSeries("Master Builder", "MasterBuilderCount");
            makeSeries("MembershipName Testing", "MembershipNameTestingCount");

            function SplitDataByItem2(barChart) {
                var chartData3 = [];

                for (var i = 0; i < barChart.length; i++) {

                    chartData3.push({
                        countryName: barChart[i].countryName,
                        BasicTestCount: barChart[i].basicTestCount,
                        ProfessionalCount: barChart[i].professionalCount,
                        EnterpriseCount: barChart[i].enterpriseCount,
                        VIPCount: barChart[i].vipCount,
                        VIPBuilderCount: barChart[i].vipBuilderCount,
                        MasterBuilderCount: barChart[i].masterBuilderCount,
                        MembershipNameTestingCount: barChart[i].membershipNameTestingCount
                    });
                }
                return chartData3;
            }

            // Make stuff animate on load
            // https://www.amcharts.com/docs/v5/concepts/animations/
            chart.appear(1000, 100);

        },
        complete: function() {
            $('.loader').css('display', 'none');
        }
    });